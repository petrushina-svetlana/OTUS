-- *************************** SqlDBM: PostgreSQL ***************************
-- * Generated by SqlDBM: Private sewing production by petrushina@bregis.ru *


-- ************************************** main.product
CREATE TABLE main.product
(
 "id"           serial NOT NULL,
 code           varchar(24) NOT NULL,
 name           varchar(255) NOT NULL,
 model_id       int NOT NULL,
 model_color_id int NOT NULL,
 model_size_id  int NOT NULL,
 material_price varchar(24) NOT NULL,
 note           varchar(2000) NULL,
 create_by      int4 NOT NULL,
 create_date    timestamp NOT NULL,
 active         bool NOT NULL,
 CONSTRAINT PK_14 PRIMARY KEY ( "id" ),
 CONSTRAINT FK_40 FOREIGN KEY ( model_color_id ) REFERENCES main.model_color ( "id" ),
 CONSTRAINT FK_39_1 FOREIGN KEY ( model_id ) REFERENCES main.model ( "id" ),
 CONSTRAINT FK_41_3 FOREIGN KEY ( model_size_id ) REFERENCES main.model_size ( "id" )
);

CREATE INDEX FK_2 ON main.product
(
 model_color_id
);

CREATE INDEX FK_2_1 ON main.product
(
 model_id
);

CREATE INDEX FK_3 ON main.product
(
 model_size_id
);

COMMENT ON TABLE main.product IS 'Изделие (модель+цвет+размер)';

COMMENT ON COLUMN main.product.model_id IS 'Модель';
COMMENT ON COLUMN main.product.model_color_id IS 'Цвет изделия';
COMMENT ON COLUMN main.product.model_size_id IS 'Размер изделия';
COMMENT ON COLUMN main.product.material_price IS 'Стоимость материалов 
(рассчитывается из кол-ва материалов, идущих на изготовление изделия)';


