-- *************************** SqlDBM: PostgreSQL ***************************
-- * Generated by SqlDBM: Private sewing production by petrushina@bregis.ru *


-- ************************************** selling.discount
CREATE TABLE selling.discount
(
 "id"                 serial NOT NULL,
 name                 varchar(100) NOT NULL,
 disc_amount          int4 NOT NULL,
 disc_type            int2 NOT NULL,
 model_id             int NULL,
 collection_id        int NULL,
 season_id            int NULL,
 model_color_id       int NULL,
 model_size_id        int NULL,
 product_id           int NULL,
 online_platform_id   int NULL,
 customer_category_id int NULL,
 begin_date           timestamp NOT NULL,
 end_date             timestamp NULL,
 create_by            int4 NOT NULL,
 create_date          timestamp NOT NULL,
 active               bool NOT NULL,
 CONSTRAINT PK_12 PRIMARY KEY ( "id" ),
 CONSTRAINT FK_19 FOREIGN KEY ( model_id ) REFERENCES main.model ( "id" ),
 CONSTRAINT FK_46 FOREIGN KEY ( model_size_id ) REFERENCES main.model_size ( "id" ),
 CONSTRAINT FK_34_1 FOREIGN KEY ( collection_id ) REFERENCES main.lu ( "id" ),
 CONSTRAINT FK_29 FOREIGN KEY ( online_platform_id ) REFERENCES selling.online_platform ( "id" ),
 CONSTRAINT FK_35_1 FOREIGN KEY ( season_id ) REFERENCES main.lu ( "id" ),
 CONSTRAINT FK_44_1 FOREIGN KEY ( product_id ) REFERENCES main.product ( "id" ),
 CONSTRAINT FK_38_1 FOREIGN KEY ( customer_category_id ) REFERENCES main.lu ( "id" ),
 CONSTRAINT FK_45 FOREIGN KEY ( model_color_id ) REFERENCES main.model_color ( "id" )
);

CREATE INDEX FK_1 ON selling.discount
(
 model_id
);

CREATE INDEX FK_10 ON selling.discount
(
 model_size_id
);

CREATE INDEX FK_5_1 ON selling.discount
(
 collection_id
);

CREATE INDEX FK_6 ON selling.discount
(
 online_platform_id
);

CREATE INDEX FK_6_2 ON selling.discount
(
 season_id
);

CREATE INDEX FK_8 ON selling.discount
(
 product_id
);

CREATE INDEX FK_9 ON selling.discount
(
 customer_category_id
);

CREATE INDEX FK_9_1 ON selling.discount
(
 model_color_id
);

COMMENT ON TABLE selling.discount IS 'Скидка/надбавка';

COMMENT ON COLUMN selling.discount.disc_amount IS 'Размер скидки';
COMMENT ON COLUMN selling.discount.disc_type IS 'Тип: 
0-скидка, 1-надбавка';
COMMENT ON COLUMN selling.discount.model_id IS 'Модель';
COMMENT ON COLUMN selling.discount.collection_id IS 'Коллекция
(lu.id, tag=9)';
COMMENT ON COLUMN selling.discount.season_id IS 'Сезон
(lu.id, tag=10)';
COMMENT ON COLUMN selling.discount.model_color_id IS 'Модель по цветам';
COMMENT ON COLUMN selling.discount.model_size_id IS 'Модель по размерам';
COMMENT ON COLUMN selling.discount.product_id IS 'Изделие';
COMMENT ON COLUMN selling.discount.online_platform_id IS 'Онлайн платфрма';
COMMENT ON COLUMN selling.discount.customer_category_id IS 'Категория заказчика
(lu.id, tag=13)';
COMMENT ON COLUMN selling.discount.begin_date IS 'Дата начала действия';
COMMENT ON COLUMN selling.discount.end_date IS 'Дата окончания действия';


